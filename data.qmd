---
title: "Data Portal"
subtitle: "Download the Data Used in the Report's Figures"
date-modified: "2024-03-27T15:44:00-08:00"
date-format: "MMM D, YYYY [at] HH:mm z"
output:
  quarto::quarto_html:
    pre_processor: quarto::observable
echo: false
---


## Data Overview
The data used in this web-book is derived from federal, state, commercial, and local sources, as well as direct communications with utilities and state program managers. More information about data sources can be found on the [methods page](./methods.html) of this web-book.

## Download Individual Tables
Individual tables can be downloaded here as text files (CSV, comma-separated values). Once downloaded to your local machine, these files can be opened graphically using Microsoft Excel, or programmatically using R or Python. 


### Capacity (wide-format)
`{ojs} capacity_wide_description`

```{ojs}
capacity_wide = FileAttachment("data/working/capacity/capacity_wide.csv").csv({typed: true});
Inputs.table(capacity_wide);

button(capacity_wide, `capacity_wide.csv`)


capacity_wide_metadata = metadata.resources[0].schema.fields

button(capacity_wide_metadata, 'capacity_wide_metadata.csv')

capacity_wide_path = metadata.resources[0].path
capacity_wide_description = metadata.resources[0].description

```

Filepath within repository: `{ojs} capacity_wide_path`
<br>
<br>


### Capacity (long-format)

`{ojs} capacity_long_description `

```{ojs}
capacity_long = FileAttachment("data/working/capacity/capacity_long.csv").csv({typed: true});
Inputs.table(capacity_long);

button(capacity_long, `capacity_long.csv`)


capacity_long_metadata = metadata.resources[1].schema.fields

button(capacity_long_metadata, 'capacity_long_metadata.csv')

capacity_long_path = metadata.resources[1].path
capacity_long_description = metadata.resources[1].description

```

Filepath within repository = `{ojs} capacity_long_path`
<br>
<br>

### Net Generation (wide-format)
`{ojs} net_generation_wide_description `

```{ojs}
net_generation_wide = FileAttachment("data/working/generation/net_generation_wide.csv").csv({typed: true});
Inputs.table(net_generation_wide);
button(net_generation_long, `net_generation_wide.csv`)

net_generation_wide_metadata = metadata.resources[3].schema.fields
button(net_generation_wide_metadata, 'net_generation_wide_metadata.csv')

net_generation_wide_path = metadata.resources[3].path
net_generation_wide_description = metadata.resources[3].description

```

Filepath within repository = `{ojs} net_generation_wide_path`
<br>
<br>

### Net Generation (long-format)
`{ojs} net_generation_long_description `

```{ojs}
net_generation_long = FileAttachment("data/working/generation/net_generation_long.csv").csv({typed: true});
Inputs.table(net_generation_long);
button(net_generation_long, `net_generation_long.csv`)

net_generation_long_metadata = metadata.resources[2].schema.fields
button(net_generation_long_metadata, 'net_generation_long_metadata.csv')

net_generation_long_path = metadata.resources[2].path
net_generation_long_description = metadata.resources[2].description

```

Filepath within repository = `{ojs} net_generation_long_path`
<br>
<br>


### Prices
```{ojs}
prices = FileAttachment("data/working/prices/prices.csv").csv({typed: true});
Inputs.table(prices);

button(prices, `prices.csv`)

```

<br>
<br>

### Population Weighted Prices
```{ojs}
weighted_prices = FileAttachment("data/working/prices/weighted_prices.csv").csv({typed: true});

Inputs.table(weighted_prices);

button(weighted_prices, `weighted_prices.csv`)

```


```{ojs}
// load libraries
stdlib = require("@observablehq/stdlib")
d3 = require("d3@7")

// load metadata
metadata = FileAttachment("data/metadata.json").json();

```



```{ojs}
// download button function
button = (data, filename = 'data.csv') => {
  const downloadData = new Blob([d3.csvFormat(data)], { type: "text/csv" });

  const size = (downloadData.size / 1024).toFixed(1);
  const button = DOM.download(
    downloadData,
    filename,
    `Download ${filename} (${size} KB)`
  );
  return button;
}

```









```{ojs}
//| eval: false

// DEPRECATED
// THIS CHUNK DOES NOT RUN (eval: false)

// fancy dropdown database viewing tool

// connect to database
db = FileAttachment("data/working/aetr.db").sqlite()

database = db.query(`SELECT * FROM ${dbTable}`)

viewof dbTable = Inputs.select((await db.describe()).value.map(d => d.name), 
                    { label: "" })


Inputs.table(database)

button = (database, filename = 'data.csv') => {
  const downloadData = new Blob([d3.csvFormat(database)], { type: "text/csv" });

  const size = (downloadData.size / 1024).toFixed(1);
  const button = DOM.download(
    downloadData,
    filename,
    `Download ${filename} (${size} KB)`
  );
  return button;
}

button(database, `${dbTable}`)
```